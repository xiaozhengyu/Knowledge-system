# Redis6

---

# 1. NoSQL 数据库简介

## 1.1 技术的发展

技术的分类：

1.  解决功能问题：Java、JSP、Tomcat、Linux、JDBC
2.  解决拓展问题：Struts、Spring、SpringMVC、JPA、MyBatis
3.  解决性能问题：==NoSQL==、MQ、Java线程、Hadoop

无论什么技术，都是用来解决问题的。NoSQL就是一种用来解决性能问题的技术，而Redis就是一种典型的NoSQL技术。

### 1.1.1 Web1.0时代

Web1.0 时代，数据访问量有限（早期的访问全部来自PC），单体服务器可以满足需求。

![image-20210803211622395](markdown/Redis6.assets/image-20210803211622395.png)

### 1.1.2 Web2.0时代

Web2.0时代，用户访问量大幅度提升，同时产生了大量的用户数据，再加上后来智能移动设备的普及，单体系统不可能支撑的住，互联网平台面临巨大的挑战。

![image-20210803212043067](markdown/Redis6.assets/image-20210803212043067.png)

#### 1.1.2.1 解决CPU及内存压力

服务器集群化、分布式部署，使用负载均衡将客户端请求均匀的发送给各个服务器，缓解单个服务器的CPU和内存压力。

![image-20210803213248660](markdown/Redis6.assets/image-20210803213248660.png)

但依然存在问题，例如session共享问题。

>   session共享问题：客户在服务器1登录，服务器1创建了session对象。请求被转发到服务器1的时候可以正常处理，请求被转发到服务器2的时候由于服务器2不存在客户的session对象因此无法处理请求。

解决session问题的方案：

1.  将session存储在cookie：不安全、额外的负载

2.  存在文件服务器或数据库：大量的IO

3.  将session复制到所有服务器：数据冗余

4.  **将session存储到缓存数据库：读取速度快（存储在内存，直接读取，不需要IO）、数据结构简单**

    ![image-20210803214342905](markdown/Redis6.assets/image-20210803214342905.png)

#### 1.1.2.2 解决IO压力

读写分离、分库分表：通过破坏一定的业务逻辑来换取性能

**缓存数据库：减少IO操作，例如将热点数据存储缓存数据库（数据存储在内存，避免IO）**

![image-20210803214547858](markdown/Redis6.assets/image-20210803214547858.png)

## 1.2 NoSQL数据库

打破了传统关系型数据库以业务逻辑为依据的存储模式，而针对不同数据结构类型改为以性能为依据的存储方式。

### 1.2.1 NoSQL概述

NoSQL = <font color = red>Not Only SQL</font>，泛指所有非关系数据。NoSQL不依赖业务逻辑存储，而以简单的<font color = red>key-value</font>模式存储，因此大大的增加的数据库的拓展能力。

>   理解：某已上线的产品现有用户3亿，如果使用关系型数据库存储用户信息，想在想要往用户表加一个字段，这是非常恐怖的！如果是NoSQL数据库，情况就会好很多。

-   不遵循SQL标准
-   不支持ACID（不支持ACID不意味着不支持事务）
-   性能远超于SQL

### 1.2.2 适用、不适用场景

适合：

-   高并发读写（电商秒杀）
-   海量数据读写
-   数据高可拓展性

不适合：

-   需求事务支持
-   需要结构化查询

### 1.2.3 常见NoSQL数据库

1.  Memcache
    -   很早出现的NoSQL数据库
    -   数据都存储在内存，==不支持持久化==
    -   支持的value类型比较单一
    -   一般作为缓存数据库辅助持久化数据库
2.  Redis
    -   几乎涵盖了Memcache的绝大部分功能
    -   数据都存储在内存，==支持持久化==（主要用于备份恢复）
    -   支持多种数据结构的value，例如string、list、hash、set、zset
    -   一般作为缓存数据库辅助持久化数据库
3.  MongoDB
    -   文档型数据库

## 2. Redis 概述、安装

