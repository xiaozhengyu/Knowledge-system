# MySQL - InnoDB - MVCC 多版本并发控制

参考文章：

1.   [MySQL-InnoDB-MVCC多版本并发控制](https://segmentfault.com/a/1190000012650596)

2.   [浅谈MySQL并发控制：隔离级别、锁与MVCC](https://juejin.cn/post/6844904096378404872)

---

## 前言

如果数据库中的事务都是串行执行的，这种方式虽然可以确保多个事务的执行不会互相影响，但会使系统出现性能瓶颈；如果事务是并发执行的，在不加以控制的前提下将引发诸多问题，如更新丢失、脏读、不可重复读、幻读、死锁等。这就需要我们在性能和安全之间做出权衡，使用合理的并发控制机制来保证并发事务的执行。

## 事务的并发场景

事务的并发场景可以归为3类：

-   **读-读**

    由于读操作并不会对记录产生任何影响，因此“读-读”场景不存在安全问题，无需额外控制。

-   **写-写**

    并发事务相继对同一记录进行更新操作时可能出现如下丢失更新的问题：

    1.  后一个事务发生回滚，导致前一个事务提交的更新被回滚数据覆盖，即出现**回滚覆盖**的问题，也称**第一类丢失更新**
    2.  前一个事务提交的更新被后一个事务提交的更新覆盖，即出现**提交覆盖**的问题，也称**第二类丢失更新**

-   **读-写**

    这种情况较为复杂，也最容易出现问题：脏读、不可重复读、幻读

## 事务的隔离等级

## 隔离等级的实现

### 传统实现方式：LBCC

### MySQL实现方式：MVCC

#### 版本链

#### ReadView

